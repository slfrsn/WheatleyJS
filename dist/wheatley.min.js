!function(t){t.portals=function(e,o){var a=this,r=t(e),e=e,n={},i={restrictGun:!1,portalSize:100};a.init=function(){n=t.extend({},i,o);var r=t('<div id="portal-gun"></div>');1==n.restrictGun?r.appendTo(e):(r.appendTo("body"),t("body").addClass("disable-cursor")),t("body *").on("click contextmenu",function(o){return o.stopPropagation(),t(o.target).is(e,e+" *")?("click"==o.type&&a.createPortal("blue",o.pageX,o.pageY),"contextmenu"==o.type&&a.createPortal("orange",o.pageX,o.pageY),!1):(a.portalGun("misfire"),0==n.restrictGun?!1:void 0)}),t(document).on("click contextmenu",".portal *",function(e){return e.stopPropagation(),"click"==e.type&&(t(e.target).is("#blue-portal *")?(a.destroyPortal("blue"),a.portalGun("fire")):a.portalGun("misfire")),"contextmenu"==e.type&&(t(e.target).is("#orange-portal *")?(a.destroyPortal("orange"),a.portalGun("fire")):a.portalGun("misfire")),!1});var l="body";1==n.restrictGun&&(l=e,e+" *"),t(l).on("mousemove",function(t){a.portalGun("activate"),r.css({top:t.pageY-r.outerWidth()/4,left:t.pageX-r.outerWidth()/4})}),t(l).on("mouseout",function(t){a.portalGun("deactivate")})},a.createPortal=function(e,o,r){var i='<div id="'+e+'-portal" class="portal appear"><div class="darkest"></div><div class="darker"></div><div class="normal"></div><div class="lighter"></div><div class="lightest"></div><div class="entrance"></div></div>',p=l(o,r);p.portal.left<p.element.left&&(o=p.element.left+p.portal.center.x),p.portal.top<p.element.top&&(r=p.element.top+p.portal.center.y),p.portal.right>p.element.right&&(o=p.element.right-p.portal.center.x),p.portal.bottom>p.element.bottom&&(r=p.element.bottom-p.portal.center.y);var s={width:n.portalSize+"px",height:n.portalSize+"px",top:r-n.portalSize/2,left:o-n.portalSize/2};if(t("#"+e+"-portal").length){var d=t("#"+e+"-portal");newPortal=d.clone(!0),d.removeClass("appear").addClass("disappear").before(newPortal).remove(),newPortal.css(s)}else t(i).appendTo("body").css(s);a.portalGun("fire")},a.destroyPortal=function(e){var o=t("#"+e+"-portal");o.addClass("disappear"),o.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).remove()})},a.portalGun=function(e){("fire"==e||"misfire"==e)&&(t("#portal-gun").addClass(e),t("#portal-gun").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t(this).removeClass(e)})),"activate"==e&&t("body").addClass("portal-gun-active"),"deactivate"==e&&t("body").removeClass("portal-gun-active")};var l=function(t,e){var o={y:1.3*n.portalSize/2,x:n.portalSize/2},a={portal:{top:e-o.y,left:t-o.x,bottom:e+o.y,right:t+o.x,center:{y:o.y,x:o.x}},element:{top:r.offset().top,left:r.offset().left,bottom:r.offset().top+r.outerHeight(),right:r.offset().left+r.outerWidth()}};return a};a.init()},t.fn.portals=function(e){return this.each(function(){if(void 0==t(this).data("portals")){var o=new t.portals(this,e);t(this).data("portals",o)}})}}(jQuery);
//# sourceMappingURL=maps/wheatley.min.js.map
