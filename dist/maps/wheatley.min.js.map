{"version":3,"names":[],"mappings":"","sources":["wheatley.min.js"],"sourcesContent":["!function(t){t.wheatley=function(e,o){var i=this,n=t(e),a=t('<div id=\"wheatley-crosshair\"></div>'),r=t(document),s=\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\",l={size:200,container:\"body\"};i.settings=t.extend({},l,o),i.initialize=function(e){i.crosshair.initialize(),r.on(\"click contextmenu\",t(\"body\").not(\".wheatley-portal div\"),function(t){if(n.has(t.target).length>0||n.is(t.target)){var e;return\"click\"==t.type&&(e=\"blue\"),\"contextmenu\"==t.type&&(e=\"orange\"),i.portal.create(e,{x:t.pageX,y:t.pageY}),!1}}),r.on(\"click contextmenu\",\".wheatley-portal div\",function(e){var o=t(e.target).parent().attr(\"id\").replace(\"-portal\",\"\"),n=\"click\"==e.type?\"blue\":\"orange\";return o==n?i.portal.destroy(n):i.crosshair.animate(\"misfire\"),!1})},i.option=function(t,e){return void 0===e?i.settings[t]:void(i.settings[t]=e)},i.locate=function(){var e=function(e){var o=t(\"#\"+e+\"-portal\");return o.length?{top:o.offset().top,left:o.offset().left,bottom:o.offset().top+1.3*i.settings.size,right:o.offset().left+i.settings.size}:void 0};return{blue:e(\"blue\"),orange:e(\"orange\"),parent:{top:n.offset().top,left:n.offset().left,bottom:n.offset().top+n.outerHeight(),right:n.offset().left+n.outerWidth()},crosshair:{top:a.offset().top-a.outerWidth()/4,left:a.offset().left-a.outerWidth()/4}}},i.destroy=function(t){i.crosshair.destroy(),i.portal.destroy(\"blue\"),i.portal.destroy(\"orange\"),n.off(\"click contextmenu\"),r.off(\"click contextmenu\",\".wheatley-portal div\"),n.removeData(),t&&\"function\"==typeof t&&t()},i.portal={create:function(e,o,n){1==arguments.length?(o={x:0,y:0},n=function(){}):2==arguments.length&&(n=function(){},\"function\"==typeof o&&(n=o));var r=o.x,s=o.y,l='<div id=\"'+e+'-portal\" class=\"wheatley-portal\"><div class=\"darkest\"></div><div class=\"darker\"></div><div class=\"normal\"></div><div class=\"lighter\"></div><div class=\"lightest\"></div><div class=\"entrance\"></div></div>',c=i.portal.calculate(r,s),f=i.locate().parent;c.left<f.left&&(r=f.left+c.centre.x),c.top<f.top&&(s=f.top+c.centre.y),c.right>f.right&&(r=f.right-c.centre.x),c.bottom>f.bottom&&(s=f.bottom-c.centre.y);var d={width:i.settings.size+\"px\",height:i.settings.size+\"px\",top:s-i.settings.size/2,left:r-i.settings.size/2};c=i.portal.calculate(r,s);var u=\"orange\"==e?i.locate().blue:i.locate().orange;u&&c.right>u.left&&c.left<u.right&&c.top<u.bottom&&c.bottom>u.top?i.crosshair.animate(\"misfire\"):(t(\"#\"+e+\"-portal\").remove(),t(l).appendTo(\"body\").css(d),a.addClass(e)),n&&\"function\"==typeof n&&n()},calculate:function(t,e){var o={y:1.3*i.settings.size/2,x:i.settings.size/2};return{top:e-o.y,left:t-o.x,bottom:e+o.y,right:t+o.x,centre:{x:o.x,y:o.y}}},destroy:function(e,o){t(\"#\"+e+\"-portal\").addClass(\"disappear\").one(s,function(){t(this).remove()}),a.removeClass(e),o&&\"function\"==typeof o&&o()}},i.crosshair={initialize:function(e){a.length&&i.crosshair.destroy(),t(i.settings.container).addClass(\"wheatley-container\"),a.appendTo(\"body\"),r.on(\"mousemove\",function(e){t(\".wheatley-container, .wheatley-portal, .wheatley-portal div\").is(e.target)?a.fadeIn(200):a.fadeOut(200),i.crosshair.update(e.pageX,e.pageY)}),e&&\"function\"==typeof e&&e()},update:function(t,e){a.css({top:e-a.outerWidth()/2,left:t-a.outerWidth()/2.5})},animate:function(e,o){a.addClass(e).one(s,function(){t(this).removeClass(e)}),o&&\"function\"==typeof o&&o()},destroy:function(e){t(i.settings.container).removeClass(\"wheatley-container\"),r.off(\"mousemove\"),a.remove(),e&&\"function\"==typeof e&&e()}},i.initialize()},t.fn.wheatley=function(e){return this.each(function(){if(void 0==t(this).data(\"wheatley\")){var o=new t.wheatley(this,e);t(this).data(\"wheatley\",o)}})}}(jQuery);"],"file":"wheatley.min.js","sourceRoot":"/source/"}